name: OSS Guardrails

on:
  pull_request:
  push:
    branches:
      - main
      - master

jobs:
  enforce-oss-boundaries:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Block commercial folders
        run: |
          forbidden_dirs=("pro" "src-pro" "enterprise")
          for dir in "${forbidden_dirs[@]}"; do
            if [ -d "$dir" ]; then
              echo "Forbidden folder detected at ./$dir"
              exit 1
            fi
          done
